
计算机系统是由两个主题部分组成：硬件和软件。硬件是计算机的物理设备。软件则是使得硬件能国正常工作的程序的集合。计算机软件分为两大类：操作系统和应用程序。应用程序使用计算机硬件来解决用户的问题。另一方面，操作系统则控制计算机用户对硬件的访问。

操作系统是一个非常复杂的系统，因此很难给予它一个普遍认同的简单定义。在这里列举一些常见的定义：

操作系统是介于计算机硬件和用户之间的接口。

操作系统时一种用来使得其他程序更加方便有效运行的程序。

操作系统作为通用管理程序管理着计算机系统中每个部件的活动，并确保计算机系统中的硬件和软件资源能够更加有效地使用。当资源使用出现冲突时，操作系统应能国及时处理，排除冲突。

操作系统时计算机硬件和用户的一个接口，它使得其他程序更加方便有效地运行，并能方便地对计算机硬件和软件资源进行访问。

操作系统的两个主要设计目标：有效地使用硬件；容易地使用资源。

基于上面的定义，操作系统位其他程序提供支持。例如，它负责把其他程序装入内存以便运行。但是，操作系统本身也是程序，它需要被装入内存和运行，这个困难如何解决呢？如果使用ROM技术把操作系统存储在内存中，这个问题就你能解决。CPU的程序计数器可以被设置位这个ROM的开始处。当计算机被i加电时，CPU从ROM中读取指令，执行它们。但这种解决方案是非常低效的，因为内存的很大一部分需要由ROM构成，而不能被其他程序使用。如今的技术是仅需要分配小部分的内存给部分操作系统。

如今使用的解决方案采用两个阶段过程。很小一部分内存用ROM构成，其中存有成为自举程序的小程序。当计算机被加电时，CPU计数器被设置位自举程序的第一条指令，并执行程序中的指令，操作系统就被执行。

操作系统已经经历了很长的一段发展历程，我们将在下面加以总结。

批处理操作系统设计于20世纪60年代，目的是控制大型计算机。当时计算机十分庞大。用穿孔卡片进行输入数据，用行式打印机输出结果，用磁带设备作为辅助存储介质。

每个运行的程序叫一个作业。想要运行程序的程序员通过穿孔卡片将程序和数据输入计算机，并向控制器发出作业请求。穿孔卡片由操作员处理。如果程序运行成功，打印结果将传给程序员，如果不成功，则报错。

这个时代的操作系统非常简单：它们只保证计算机所有资源被从一个作业转换到另一个作业。

为了有效的使用计算机资源，多道程序的概念被引进。它可以将多个作业同时装进内存，并且当且仅当资源可用时分配给需要它的作业。例如，当一个程序正使用输入/输出设备时，CPU则处于空闲状态，并可以供其他程序使用。我们将在本章后面详细介绍多道操作系统。

多道程序带类了分时的概念：资源可以被不同的作业分享。每个作业可以分到一段时间来使用资源。因为计算机运行速度很快，所以分时系统对于用户是隐藏的，每个用户都感觉整个系统在为自己服务。

最终利用分时技术的多道程序极大地改进了计算机的使用效率。但是，它们需要一个更复杂的操作系统，它必须可以调度：给不同的程序分配资源并决定哪一个程序什么时候使用哪一个资源。在这个时代中用户和计算机的关系也改变了。用户可以直接与操作系统进行交互而不必通过操作员。一个新的术语也随之产生：进程。一个作业是一个要运行的程序，一个进程则是在内存中等待分配资源的程序。

个人计算机产生后，需要有一类适合这类计算机的操作系统。于是，单用户操作系统就应运动而生了。

人们对更快和更有效的需求导致了并行系统的设计：在统一计算机中安装多个CPU，每个CPU可以处理一个程序或一个程序的一部分。意味着很多任务可以并行地处理而不是在串行处理。当然这种操作系统要比单CPU的操作系统复杂得多。

网络化和网络互联的发展，扩大了操作系统的内涵。一个以往必须在一台计算机上运行的作业现在可以由远隔千里的多台计算机共同完成。程序可以在一台计算机上运行一部分而在另一台计算机上运行另一部分，只要它们通过网络连接即可。资源可以是分布式的，一个程序需要的文件可能分布在世界的不同地方。分布式系统结合了以往系统的特点和新的功能，例如安全控制。

实时系统是指在特定时间限制内完成任务。它们被用在实时应用程序中，这些应用程序监控、响应或控制外部过程或环境。在交通控制、病人监控或军事控制系统中可以找到实时系统的例子。

现在的操作系统十分复杂，它必须可以管理系统中的不同资源。它像是一个有多个上层部门经理的管理机构，每个部门经理负责自己的部门管理，并且互相协调。现代操作系统至少具有以下4中功能：存储管理、进程管理、设备管理、文件管理。就像很多组织由一个部门不归任何经理管理一样，操作系统也有这样一个部分，被称为用户界面或命令解释程序，它负责操作系统与外界通信。

每个操作系统都有用户界面，即指用来接收用户的输入并向操作系统解释这些请求的程序。一些操作系统的用户界面，被称为命令解释程序。在其他操作系统中，则被称为窗口，以指明它是一个由菜单驱动的并有着GUI的部件。

喜爱年在计算机操作系统的一个重要职责是内存管理。计算机中存储器的容量近年来得到激增，同样所处理的程序和数据也越来越大。内存分配必须进行管理一面“内存溢出”的错误。操作系统按照存储管理可以分为两大类：单道程序和多道程序。

单道程序属于过去，但它还是值得学习，因为它有助于理解多道程序。在单道程序中，大多数内存用来转载单一的程序，仅仅一小部分用来装载操作系统。在这种配置下，整个程序装入内存运行，运行结束后，程序区域由其他程序取代。

这里内存管理器的工作是简单明了的，即将程序载入内存、运行它、再装入新程序。但是，在技术方面仍然有很多问题：

程序必须能够载入内存。如果内存容量比程序小，程序就无法运行。

当一个程序正在运行时，其他程序不能运行。一个程序在执行过程中经常需要从输入设备得到数据，并且把数据发送至输出设备。但输入/输出设备的速度远远小于CPU，所以当输入/输出设备运行时，CPU处于空闲状态。而此时由于其他程序不再内存中，CPU不能为其服务。这种情况下CPU和内存的使用效率很低。

在多道程序下，同一时刻可以装载多个程序并且能够同时被执行。CPU轮流为其服务。

从20世纪60年代开始，多道程序已经经过了一系列的改进。

有两种技术属于非交换范畴，这意味着程序在运行期间始终驻留在内存中。另外两种技术属于交换范畴。也就是说，在运行过程中，程序可以在内存和硬盘之间多次交换数据。

多道程序的第一种技术称为分区调度。在这种模式中，内存被分为不定长的几个分区。那个部分或分区保存一个程序。CPU在各个程序之间交替服务。它由一个程序开始，执行一些指令，直到有输入/输出操作或者分配给程序的时限到达为止。CPU保存最近使用的指令所分配的内存地址后转入下一个程序。对下一个程序采用同样的步骤反复执行下去。当所有程序服务完毕后，再转回第一个程序。当然，CPU可以进行优先级管理，用于控制分配给每个CPU时间。

在这种技术下，每个程序完全载入内存，并占用连续的地址。分区调度改进了CPU的使用效率，但仍然有以下一些问题：

分区的大小必须由内存管理器预先决定。如果分区小了，由的程序就不能载入内存。如果分区大了，就会出现空闲区。

即使分区在刚开始时比较合适，但随着新程序的交换载入内存后有可能出现空闲区。

当空闲区过多时，内存管理器能够紧缩分区并删除空闲区和创建新区，但这将会增加系统额外开销。

分页调度提高了分区调度的效率。在分页调度下，内存被分成大小相等的若干部分，称为帧。程序被分为大小相等的部分，称为页。页和帧的大小通常时一样的，并且与系统用于从存储设备中提取信息的块的大小相同。

页被载入内存中的帧。如果一个程序有3页，它就在内存中占用3个帧。在这种技术下，程序在内存中不必时连续的：来嗯个连续的页可以占哟哦嗯内存中不连续的两个帧。分页调度对分区调度的优势在于，一个需要6个帧的程序可以代替两个各占有不连续的3个帧的程序。而不必等到有6个连续的帧出现后再载入内存。

分页调度在一定程度上提高了效率，但整个程序仍需要在运行前全部载入内存。这意味着只有4个不连续帧时，一个需要6个空闲帧的程序不能载入。

分页调度不需要程序转载在连续的内存中，但仍需要程序载入内存中运行。请求分页调度该表了后一种限制。在请求分页调度中，程序被分为页，但是页可以依次载入内存、运行，然后被另一个页替代。换句话说，内存可以同时载入多个程序的页。此外，来自同一个程序的连续页可以不必载入同一个帧，一个页可以载入任何空闲帧。

类此于分页调度的技术时分段调度。在分页调度中，不像程序员以模块来考虑程序，程序实际是分为大小相同的页。你将在后面的章节中看到，程序通称由主程序和子程序组成，在请求分段调度中，程序将按照程序员的角度划分成段，它们载入内存中、执行，然后被来自统一程序或其他程序的模块代替。

请求分页和分段调度结合了两者的有点以提高系统效率。一个段也许太大而不能载入内存中的空闲区。内存可以分成很多帧，一个模块可以份额成很多页，一次装入内存运行。

请求分页调度和请求分段调度移位这当程序运行时，一部分程序驻留在内存中个一部分则放在硬盘上。这就意味着...。虚拟内存。

操作系统的第二个功能是进程管理，在介绍该概念之前，我们先定义一些术语。

现代操作系统关于指令集有三个术语：程序、作业和进程。尽管这些术语比较模糊，并且不同操作系统对于它们的定义不一致，我们还是可以作出非正式的定义。

程序是由程序员编写的一组稳定的指令，存在磁盘上，它可能会也肯能不会成为作业。

从一个程序被选中执行，到其运行结束并再次成为一个程序的这段过程中，该程序称为作业。在整个过程中，作业可能会或不会被执行，或者驻留在磁盘上等待调入内存，或者在内存中等待CPU执行，或者驻留在硬盘或内存中等待一个输入/输出事件，或者在内存中等待知道被CPU运行。在所有这些情况下程序才称为作业。当一个作业执行完毕，它又变成程序代码并再次留在硬盘中，操作系统不再支配该程序。

进程是一个运行中的程序。该程序开始运行但还未结束。换句话说，进程是一个驻留在内存中运行的作业，它是从众多等待作业中选取出来并转入内存中的作业。一个进程可以处于运行或者的等待CPU调用。只要作业装入内存就称为一个进程。

将一个作业或者进程从一个状态改变为另一个状态，进程管理器使用了两个调度器：作业调度器和进程调度器。

作业调度器将一个作业从保持状态转入就绪状态，或是从运行状态转入终止状态。换句话说，作业调度其负责从作业中创建一个进程或终止一个进程。

进程调度器将一个进程从一个状态转入另一个状态。当一个进程等待某事件发生时，它使这一进程从运行状态进入等待状态。当事件发生时，进程将从等待状态进入就绪状态。

设备管理器负责访问输入/输出设备。在计算机系统中输入/输出设备存在这数量和速度的限制。由于这些设备与CPU和内存比起来速度要慢很多，多以当一个进程访问输入/输出设备时，在该段是建安内这些设备对其他进程而言是不可用的。设备管理器负责让输入/输出设备使用起来更有效。

对设备管理器的细节的讨论需要掌握有关操作系统原理的高级知识，这些都不在本书讨论之列。但是我们可以在这里简要地列出设备管理器的功能。

现今的操作系统使用文件管理器来控制对文件的访问。对文件管理器细节的讨论同样需要掌握有关操作系统原理和文件访问的高度概念，这些超出了本出的讨论范围。我们将在地13章讨论一些有关文件访问的问题，但是对于了解文件管理器实际的操作还是不够。下面简述一下文件管理器的功能：

文件管理器控制文件的访问。只有那些获得允许的应用程序才能够访问，访问方式也不同。例如，一个进程也许可以读取文件，但却不允许写操作。另一个进程也许被允许执行文件和进程，但却不允许读取文件的内容。

文件管理器管理文件的创建、删除和修改。

文件管理器可以给文件命名。

文件管理器管理文件的存储：怎样存储，存在哪里等。

文件管理器负责归档和备份。

在这一节，我们将介绍一些常用的操作系统，以促进将来的学习。我们选择三种计算机用户熟悉的操作系统：UNIX、Linux和Windows。

UNIX是由贝尔实验室的计算机科学研究小组的Thomson和Ritchie在1969年首先开发出来的。从那时起，UNIX经历了许多版本。它是一个在程序员和计算机科学家中较为流行的操作系统。它可以不经较大的改动而方便地从一个平台移植到另一个平台。原因是它主要是由C语言编写的。第二，UNIX拥有一套功能强大的工具，它们能够组合起来去解决许多问题，而这一工作在其他操作系统则需要通过编程来完成。第三，它具有设备无关性，因为操作系统本身就包含了设备驱动程序，这意味着它可以方便地配置来运行任何设备。

UNIX是多用户、多道程序、可移植的操作系统，它被设计来方便编程、文本处理、通信和其他许多希望操作系统来完成的任务。它包含几百个简单、单一目的的函数，这些函数能组合起来完成任何可以想象的处理任务。它的灵活性通过它可以在三种不同的计算机环境中而得到证明，这三种环境为：单机个人环境、分时系统和客户、服务器系统。

UNIX由4个主要部分构成：内核、命令解释器、一组标准工具和应用程序。这些组成部分显示在图中。

内核是UNIX系统的心脏。它包含操作系统最基本的部分：内存管理、进程管理、设备管理和文件管理。系统所有其他部分均调用内核来执行这些服务。

命令解释器是UNIX中用户最可见的部分。它接收和解释用户输入的命令。在许多方面，这使它成为UNIX结构的最重要的组成部分。它肯定也是用户最知道的部分。为了在系统做任何事情，我们必须向命令解释器输入命令。如果命令需要一个工具，命令解释器将请求内核执行该工具。如果命令需要一个应用程序，命令解释器需要内核运行它。有些操作系统有几种不同的命令解释器。

UNIX中有几百个工具。工具是UNIX标准程序，它为用户提供支撑过程。常用的三个工具是：文本编辑器、搜索程序和排序程序。

许多系统工具实际上复杂的应用程序。例如，UNIX的电子邮件系统被看成一个工具，就像三种常见的文本编辑器：vi、emacs和pico。所有这4个工具本身都是很大的系统。其他工具是简短函数。例如，list工具显示磁盘目录中的文件。

UNIX的应用是指一些程序，它们不是操作系统发布中的标准部分。它们是由系统管理员、专职程序员或用户编写的，提供了对系统的扩展能力。事实上，许多标准工具自多年前都是作为应用出现的，后来被证明非常有用，现在就成了系统的一部分。

在1991年，芬兰Helsinki大学的学生Linux Torvalds开发了一个新的操作系统，这就是如今所知的Linux。初始内核如今成长为全面的操作系统。1997年发布的Linus2.0内核成为商业操作系统，它具有传统UNIX的所有特性。

内核负责处理所有属于内核的职责。

系统库含有一组被应用程序使用的函数，用于与内核交互。

系统工具是使用系统库提供的服务，执行管理任务的各个程序。

Linux的安全机制提供了传统上为UNIX定义的安全特性。如身份验证和访问控制。
